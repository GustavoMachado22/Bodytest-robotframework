
name: CI

on: [workflow_dispatch]

jobs:
  run_automation:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - name: Install Dependecies
      env:
        PYTHON_VERSION: "3.10"
      run: |
        py_version=$PYTHON_VERSION
        sudo apt update
        sudo apt install software-properties-common
        sudo add-apt-repository -y ppa:deadsnakes/ppa
        sudo apt update
        sudo apt install python"$py_version"
        sudo curl -fsSL https://deb.nodesource.com/setup_14.x | bash -
        sudo apt-get install -y xvfb ca-certificates net-tools netcat gnupg ffmpeg libgtk-3-0 libgdk-pixbuf2.0-dev libxcomposite-dev libdbus-glib-1-2 libatk-bridge2.0-0 wget libgbm1 libnss3 libxss1 libasound2
        sudo apt-get install -y nodejs

    - name: Verify Version
      run: |
          python --version
          nodejs -v
          npm --version
          aws --version

    - name: Install libraries for robot
      run: |
          pip install -U pip
          pip install -r requirements.txt
          rfbrowser init
          python -m Browser.entry init

    - name: Run Tests
      run: |
            mkdir results
            robot -d ./logs tests
